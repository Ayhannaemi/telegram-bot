from flask import Flask, request
import requests
import os

TOKEN = "8094291923:AAENXpm4aBXhIjIUx6_4tKuCKsiwmh9ssc8"
URL = f"https://api.telegram.org/bot{TOKEN}/"

app = Flask(__name__)

# -----------------------------
# ØªØ§Ø¨Ø¹ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±
# -----------------------------
def send_message(chat_id, text):
    requests.post(URL + "sendMessage", data={"chat_id": chat_id, "text": text})

# -----------------------------
# Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
# -----------------------------
@app.route(f"/{TOKEN}", methods=["POST"])
def webhook():
    data = request.get_json()
    if not data or "message" not in data:
        return "ok"

    chat_id = data["message"]["chat"]["id"]
    text = data["message"].get("text", "").lower()

    if text == "/start":
        send_message(chat_id, "ğŸ‘‹ Ø³Ù„Ø§Ù…! Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ Ø¨Ù‡ Ø±Ø¨Ø§Øª Arena PC.\n"
                              "Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¯Ù† Ø®Ø¯Ù…Ø§ØªØŒ Ø¯Ø³ØªÙˆØ± /services Ø±Ùˆ Ø¨ÙØ±Ø³Øª âœ¨")

    elif text == "/services":
        send_message(chat_id, "ğŸ“‹ Ø®Ø¯Ù…Ø§Øª Ù…Ø§:\n"
                              "1ï¸âƒ£ Ø·Ø±Ø§Ø­ÛŒ Ùˆ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ÙˆØ¨â€ŒØ³Ø§ÛŒØª\n"
                              "2ï¸âƒ£ Ø·Ø±Ø§Ø­ÛŒ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ù…ÙˆØ¨Ø§ÛŒÙ„\n"
                              "3ï¸âƒ£ Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ (UI/UX)\n"
                              "4ï¸âƒ£ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒØªÙˆÙ†ØŒ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ùˆ ÙˆØ±Ø¯Ù¾Ø±Ø³\n"
                              "5ï¸âƒ£ ÙØ±ÙˆØ´ Ùˆ ØªØ¹Ù…ÛŒØ± Ù„Ù¾â€ŒØªØ§Ù¾ Ùˆ Ù„ÙˆØ§Ø²Ù… Ø¬Ø§Ù†Ø¨ÛŒ\n\n"
                              "Ø¨Ø±Ø§ÛŒ Ø¬Ø²Ø¦ÛŒØ§Øª Ø¨ÛŒØ´ØªØ±: /price")

    elif text == "/price":
        send_message(chat_id, "ğŸ’° ØªØ¹Ø±ÙÙ‡â€ŒÙ‡Ø§:\n"
                              "ğŸ”¹ Ø·Ø±Ø§Ø­ÛŒ Ø³Ø§ÛŒØª Ø§Ø² Û³ Ù…ÛŒÙ„ÛŒÙˆÙ† ØªÙˆÙ…Ø§Ù†\n"
                              "ğŸ”¹ Ø·Ø±Ø§Ø­ÛŒ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ø² Ûµ Ù…ÛŒÙ„ÛŒÙˆÙ† ØªÙˆÙ…Ø§Ù†\n"
                              "ğŸ”¹ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø³Ø§ÛŒØª Ù…Ø§Ù‡ÛŒØ§Ù†Ù‡ Ø§Ø² ÛµÛ°Û° Ù‡Ø²Ø§Ø± ØªÙˆÙ…Ø§Ù†\n"
                              "ğŸ”¹ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒÛŒ Ø§Ø² Û³ÛµÛ° Ù‡Ø²Ø§Ø± ØªÙˆÙ…Ø§Ù† Ø¨Ù‡ Ø¨Ø§Ù„Ø§\n\n"
                              "Ø¨Ø±Ø§ÛŒ Ø³ÙØ§Ø±Ø´ØŒ Ø¯Ø³ØªÙˆØ± /order Ø±Ùˆ Ø¨ÙØ±Ø³Øª.")

    elif text == "/order":
        send_message(chat_id, "ğŸ§¾ Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´ Ù„Ø·ÙØ§Ù‹ Ù…ÙˆØ§Ø±Ø¯ Ø²ÛŒØ± Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯:\n"
                              "1ï¸âƒ£ Ù†ÙˆØ¹ Ù¾Ø±ÙˆÚ˜Ù‡ (Ù…Ø«Ù„Ø§Ù‹ Ø³Ø§ÛŒØª ÛŒØ§ Ø§Ù¾)\n"
                              "2ï¸âƒ£ ØªÙˆØ¶ÛŒØ­ Ú©ÙˆØªØ§Ù‡ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù†ÛŒØ§Ø²Øª\n"
                              "3ï¸âƒ£ Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ù…Ø¯Ù†Ø¸Ø±\n\n"
                              "ğŸ“¨ Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ØŒ Ø¨Ø§ Ø´Ù…Ø§ ØªÙ…Ø§Ø³ Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒÙ….\n"
                              "Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ: @Arena_Suppoort")

    elif text == "/portfolio":
        send_message(chat_id, "ğŸ“‚ Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø§Ø±Ù‡Ø§:\n"
                              "ğŸŒ arenapc.ir\n"
                              "ğŸ’¼ instagram.com/arena_pc\n\n"
                              "Ø¨Ø±Ø§ÛŒ Ø³ÙØ§Ø±Ø´ Ø§Ø®ØªØµØ§ØµÛŒ: /order")

    elif text == "/about":
        send_message(chat_id, "ğŸ¢ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§:\n"
                              "ArenaPC Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒØ§ÛŒ Ø§Ø² Ø·Ø±Ø§Ø­Ø§Ù† Ùˆ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³Ø§Ù†Ù‡ Ú©Ù‡ Ø±ÙˆÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ ÙˆØ¨ØŒ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ùˆ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù†.\n"
                              "ğŸ¯ Ù‡Ø¯Ù Ù…Ø§ØŒ ØªØ±Ú©ÛŒØ¨ Ø®Ù„Ø§Ù‚ÛŒØª Ø¨Ø§ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒâ€ŒØ³Øª.")

    elif text == "/contact":
        send_message(chat_id, "ğŸ“ Ø±Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø·:\n"
                              "Telegram: @Arena_Suppoort\n"
                              "Instagram: @arena_pc\n"
                              "Website: arenapc.ir")

    elif text == "/kolye":
        send_message(chat_id, "ğŸ’ Ù‚ÛŒÙ…Øª Ú©Ù„ÛŒÙ‡ Ù„Ù¾â€ŒØªØ§Ù¾â€ŒÙ‡Ø§ Ø§Ø² Û¸Û°Û° Ù‡Ø²Ø§Ø± ØªÙˆÙ…Ø§Ù† Ø¨Ù‡ Ø¨Ø§Ù„Ø§ Ù‡Ø³Øª.\n"
                              "Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¯Ù† Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø±ÙˆØ²ØŒ Ø¨Ù‡ @Arena_Suppoort Ù¾ÛŒØ§Ù… Ø¨Ø¯Ù‡.")

    else:
        send_message(chat_id, "â“ Ø¯Ø³ØªÙˆØ± Ù†Ø§Ø´Ù†Ø§Ø®ØªÙ‡!\n"
                              "Ø§Ø² /start Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù† ØªØ§ Ù„ÛŒØ³Øª Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒ.")

    return "ok"

# -----------------------------
# ØµÙØ­Ù‡ ØªØ³Øª
# -----------------------------
@app.route("/")
def home():
    return "ğŸ¤– Telegram Bot is running!"

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=int(os.environ.get("PORT", 5000)))
